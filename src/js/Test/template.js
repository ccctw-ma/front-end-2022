const dayjs = require('dayjs')


let data = {
    "_id": "c72887cebfe6e4bf98e16534c24fc1fcb",
    "title": "大周期测试1",
    "beginTime": "2021-12-31T16:00:00.000Z",
    "endTime": "2022-06-29T16:00:00.000Z",
    "members": [],
    "isApplied": false,
    "hasAppliedTo": "",
    "children": [
        {
            "_id": "c72887cebfe6e4bf98e16534c24fc1fcb_c6890e1ca05594125a9398d01ee28e452",
            "title": "中周期1",
            "beginTime": "2021-12-31T16:00:00.000Z",
            "endTime": "2022-02-27T16:00:00.000Z",
            "children": [
                {
                    "_id": "c72887cebfe6e4bf98e16534c24fc1fcb_c6890e1ca05594125a9398d01ee28e452_cae9b82d2a6c24d25b34eaedfe0b73e82",
                    "title": "跳跃训练",
                    "beginTime": "2021-12-31T16:00:00.000Z",
                    "endTime": "2022-01-06T16:00:00.000Z",
                    "children": [
                        {
                            "_id": "c14175fbb4a0e47b4bba26b536091e19f",
                            "contents": [
                                {
                                    "title": "后撤开放步过度加速扶墙 2（技术）",
                                    "frequency": "",
                                    "rest": "",
                                    "representative": "",
                                    "load": "",
                                    "trainTarget": "",
                                    "rhythmE": "",
                                    "rhythmP": "",
                                    "rhythmC": "",
                                    "remarks": "",
                                    "useElasticBand": false,
                                    "useSource": true,
                                    "sourceType": "power",
                                    "sourceId": "1d717bd5b2ca4577b6058eb3ec28baaa",
                                    "_id": "ccaf84f50c44e4775b591e2735193ed31"
                                }
                            ],
                            "time": "2022-01-30T16:00:00.000Z"
                        },
                        {
                            "_id": "cf84e0fd54710474ebb29a047808242ab",
                            "contents": [],
                            "time": "2022-01-31T16:00:00.000Z"
                        },
                        {
                            "_id": "c2f326e921c4c46b4b5c0419afd9d2a8b",
                            "contents": [],
                            "time": "2022-02-01T16:00:00.000Z"
                        },
                        {
                            "_id": "cc6a09aa9801c4065808241aaee91dea8",
                            "time": "2022-02-02T16:00:00.000Z",
                            "contents": []
                        },
                        {
                            "_id": "c8a50f60642da4b169b2bb54ed9dcb001",
                            "time": "2022-02-03T16:00:00.000Z",
                            "contents": []
                        },
                        {
                            "_id": "c12d41698a78e41fcbde99f5f8d7d0b47",
                            "time": "2022-02-04T16:00:00.000Z",
                            "contents": []
                        },
                        {
                            "_id": "c1d2fc87540674976bbd6a21fbbb7741e",
                            "time": "2022-02-05T16:00:00.000Z",
                            "contents": []
                        }
                    ]
                },
                {
                    "_id": "c72887cebfe6e4bf98e16534c24fc1fcb_c6890e1ca05594125a9398d01ee28e452_c2edf3c5baeed46058d5498193c00568a",
                    "title": "新小周期",
                    "beginTime": "2022-01-07T16:00:00.000Z",
                    "endTime": "2022-01-13T16:00:00.000Z",
                    "children": [
                        {
                            "_id": "cf86fbdb1c8d745f4829a14fcb5481e95",
                            "time": "2022-02-02T16:00:00.000Z",
                            "contents": []
                        },
                        {
                            "_id": "ccb7b52871d8244be9e2f0120656e2f29",
                            "time": "2022-02-03T16:00:00.000Z",
                            "contents": []
                        },
                        {
                            "_id": "ca4cf7747bdae48f7af16c02bd9b7bb46",
                            "time": "2022-02-04T16:00:00.000Z",
                            "contents": []
                        },
                        {
                            "_id": "c7823248df69344768f985c96d68b723d",
                            "time": "2022-02-05T16:00:00.000Z",
                            "contents": []
                        },
                        {
                            "_id": "c6b9b80ede0544130a0fda7995e9e8875",
                            "time": "2022-02-06T16:00:00.000Z",
                            "contents": []
                        },
                        {
                            "_id": "c57df007d0cd1453b8b27a206e15c9cfd",
                            "time": "2022-02-07T16:00:00.000Z",
                            "contents": []
                        },
                        {
                            "_id": "c86f467e4048740b1a497f6f9277aa6c7",
                            "time": "2022-02-08T16:00:00.000Z",
                            "contents": []
                        }
                    ]
                },
                {
                    "_id": "c72887cebfe6e4bf98e16534c24fc1fcb_c6890e1ca05594125a9398d01ee28e452_c1a6992449909400eb5d397ff01ac0584",
                    "title": "蹲跳",
                    "beginTime": "2022-01-14T16:00:00.000Z",
                    "endTime": "2022-01-20T16:00:00.000Z",
                    "children": [
                        {
                            "_id": "c0f16f53786fe4a068971c0177531c41e",
                            "contents": [
                                {
                                    "title": "Vertimax剪步交叉蹲跳连续反应",
                                    "frequency": "",
                                    "rest": "",
                                    "representative": "",
                                    "load": "",
                                    "trainTarget": "",
                                    "rhythmE": "",
                                    "rhythmP": "",
                                    "rhythmC": "",
                                    "remarks": "",
                                    "useElasticBand": false,
                                    "useSource": true,
                                    "sourceType": "strength",
                                    "sourceId": "5265a43879fd4dfba8fff980dcfe2311",
                                    "_id": "cb31470cdd7504817a155b148cf8672a6"
                                }
                            ],
                            "time": "2022-02-04T16:00:00.000Z"
                        },
                        {
                            "_id": "c06fee3521d3b4bff86747164716c8bee",
                            "contents": [],
                            "time": "2022-02-05T16:00:00.000Z"
                        },
                        {
                            "_id": "c18c6684b9c2940ba9f5d5136b3d425f5",
                            "contents": [],
                            "time": "2022-02-06T16:00:00.000Z"
                        },
                        {
                            "_id": "cfb62462c8c5d4260a51c4ef8c5eca90f",
                            "contents": [],
                            "time": "2022-02-07T16:00:00.000Z"
                        },
                        {
                            "_id": "c73e00d02093a49808e001b1474b85156",
                            "time": "2022-02-08T16:00:00.000Z",
                            "contents": []
                        },
                        {
                            "_id": "ce98e2efd45e540109d15af1287b1072c",
                            "time": "2022-02-09T16:00:00.000Z",
                            "contents": []
                        },
                        {
                            "_id": "c84e6403bf2c548d69ad9c6bf4608974b",
                            "time": "2022-02-10T16:00:00.000Z",
                            "contents": []
                        }
                    ]
                }
            ]
        }
    ]
}

let months = new Array(12).fill(0)

for (let i = 0; i < data.children.length; i++) {
    let medium = data.children[i];
    for (let j = 0; j < medium.children.length; j++) {
        let small = medium.children[j];
        months[dayjs(small.beginTime).month()]++
        if (j === medium.children.length - 1) {
            months[dayjs(small.endTime).month()]++
        }
    }

}
months = months.map(month => month === 0 ? 1 : month)
console.log(months)
console.log(months.reduce((pre, cur) => pre + cur, 0))

//大周期占多少个月
console.log((dayjs(data.endTime).month() - dayjs(data.beginTime).month() + 1 + 12) % 12)


console.log(dayjs(data.beginTime).isSame(dayjs(data.endTime)))

